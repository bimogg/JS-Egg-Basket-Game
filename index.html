<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>Egg Game</title>
    <link rel="icon" href="imgs/EB.png" type="image/png" />
    <link rel="stylesheet" href="game.css" />
    <script src="game.js"></script>
  </head>
  <body style="background-image: url('imgs/background.jpg') !important; background-size: cover !important; background-position: center !important; background-repeat: no-repeat !important;">
    <h2>Level: <span class="level">1</span></h2>
    <h2>Score: <span class="score">0</span></h2>
    <h2>Highest Score: <span class="HighScore">0</span></h2>
    <h2>Time: <span class="timer">60</span>s</h2>
    <div id="gameOverModal" style="display: none;">
      <div class="modal-content">
        <h1>Время вышло!</h1>
        <h2>Вы собрали: <span id="finalScore">0</span> пользователей</h2>
        <button onclick="restartGame()">Играть снова</button>
      </div>
    </div>
    <img src="imgs/EB.png" class="EB" onerror="this.style.display='none'; createBasket();" />
    <img src="imgs/FB.png" class="FB" onerror="this.style.display='none';" />
    <div id="basketFallback" style="display: none; position: absolute; bottom: 5px; width: 175px; height: 100px; background-color: #8B4513; border-radius: 10px; border: 3px solid #654321;"></div>
    <script>
    function createBasket() {
        const basket = document.getElementById('basketFallback');
        if(basket) basket.style.display = 'block';
    }
    
    // Принудительная загрузка фона через JavaScript для Safari
    window.addEventListener('load', function() {
        const body = document.body;
        const html = document.documentElement;
        const bgImage = 'imgs/background.jpg';
        
        // Проверяем, загрузилось ли изображение
        const img = new Image();
        img.onload = function() {
            // Устанавливаем фон для всех элементов
            body.style.backgroundImage = 'url(' + bgImage + ')';
            html.style.backgroundImage = 'url(' + bgImage + ')';
            body.style.backgroundSize = 'cover';
            html.style.backgroundSize = 'cover';
            body.style.backgroundPosition = 'center center';
            html.style.backgroundPosition = 'center center';
            body.style.backgroundRepeat = 'no-repeat';
            html.style.backgroundRepeat = 'no-repeat';
            
            // Для Safari добавляем webkit префиксы
            body.style.webkitBackgroundSize = 'cover';
            html.style.webkitBackgroundSize = 'cover';
            
            // Создаем псевдоэлемент для Safari если нужно
            if (!body.querySelector('.bg-overlay')) {
                const overlay = document.createElement('div');
                overlay.className = 'bg-overlay';
                overlay.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background-image:url(' + bgImage + ');background-size:cover;background-position:center;background-repeat:no-repeat;z-index:-1;pointer-events:none;';
                body.appendChild(overlay);
            }
            
            console.log('Фон загружен успешно');
        };
        img.onerror = function() {
            console.error('Ошибка загрузки фона:', bgImage);
        };
        img.src = bgImage;
    });
    </script>
  </body>
</html>
